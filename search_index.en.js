window.searchIndex = {"fields":["title","body"],"pipeline":["trimmer","stopWordFilter","stemmer"],"ref":"id","version":"0.9.5","index":{"body":{"root":{"docs":{},"df":0,"0":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1},"1":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":2.6457513110645907},"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.4142135623730951}},"df":2,"0":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":2.0}},"df":1,",":{"docs":{},"df":0,"0":{"docs":{},"df":0,"0":{"docs":{},"df":0,"0":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.7320508075688772}},"df":1}}}},"7":{"docs":{},"df":0,"8":{"docs":{},"df":0,"5":{"docs":{},"df":0,"2":{"docs":{},"df":0,"3":{"docs":{},"df":0,"3":{"docs":{},"df":0,"3":{"docs":{},"df":0,"1":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}}},"g":{"docs":{},"df":0,"b":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}},"7":{"docs":{},"df":0,"2":{"docs":{},"df":0,"4":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}},"2":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":2.23606797749979}},"df":1,"m":{"docs":{},"df":0,"b":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.4142135623730951}},"df":1}}},"3":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1,".":{"docs":{},"df":0,"1":{"docs":{},"df":0,"4":{"docs":{},"df":0,"f":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}}}},"0":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1,"分":{"docs":{},"df":0,"钟":{"docs":{},"df":0,"）":{"docs":{},"df":0,"，":{"docs":{},"df":0,"什":{"docs":{},"df":0,"么":{"docs":{},"df":0,"都":{"docs":{},"df":0,"不":{"docs":{},"df":0,"干":{"docs":{},"df":0,"。":{"docs":{},"df":0,"煮":{"docs":{},"df":0,"好":{"docs":{},"df":0,"了":{"docs":{},"df":0,"，":{"docs":{},"df":0,"再":{"docs":{},"df":0,"去":{"docs":{},"df":0,"烧":{"docs":{},"df":0,"菜":{"docs":{},"df":0,"（":{"docs":{},"df":0,"1":{"docs":{},"df":0,"5":{"docs":{},"df":0,"分":{"docs":{},"df":0,"钟":{"docs":{},"df":0,"）":{"docs":{},"df":0,"，":{"docs":{},"df":0,"烧":{"docs":{},"df":0,"好":{"docs":{},"df":0,"了":{"docs":{},"df":0,"再":{"docs":{},"df":0,"去":{"docs":{},"df":0,"煮":{"docs":{},"df":0,"汤":{"docs":{},"df":0,"（":{"docs":{},"df":0,"1":{"docs":{},"df":0,"0":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"5":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}},"4":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1,"2":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}},"5":{"docs":{},"df":0,"5":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}},"6":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0},"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":2},"8":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1},"a":{"docs":{},"df":0,"l":{"docs":{},"df":0,"i":{"docs":{},"df":0,"a":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":3.1622776601683795}},"df":1,"s":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":5.744562646538029}},"df":1}}}},"m":{"docs":{},"df":0,"p":{"docs":{},"df":0,";":{"docs":{},"df":0,"m":{"docs":{},"df":0,"u":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.7320508075688772},"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":2}}},"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.7320508075688772}},"df":1}}}},"s":{"docs":{},"df":0,"y":{"docs":{},"df":0,"n":{"docs":{},"df":0,"c":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.7320508075688772}},"df":1}}}},"w":{"docs":{},"df":0,"a":{"docs":{},"df":0,"i":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}},"b":{"docs":{},"df":0,"a":{"docs":{},"df":0,"o":{"docs":{},"df":0,"c":{"docs":{},"df":0,"h":{"docs":{},"df":0,"u":{"docs":{},"df":0,"n":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}},"e":{"docs":{},"df":0,"h":{"docs":{},"df":0,"a":{"docs":{},"df":0,"v":{"docs":{},"df":0,"i":{"docs":{},"df":0,"o":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}}}}}}},"o":{"docs":{},"df":0,"r":{"docs":{},"df":0,"r":{"docs":{},"df":0,"o":{"docs":{},"df":0,"w":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":2.6457513110645907}},"df":1}}}}}},"c":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":4.47213595499958}},"df":1,"/":{"docs":{},"df":0,"r":{"docs":{},"df":0,"u":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}},"1":{"docs":{},"df":0,"0":{"docs":{},"df":0,"k":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.4142135623730951}},"df":1}}},"9":{"docs":{},"df":0,"9":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}},"h":{"docs":{},"df":0,"a":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}},"e":{"docs":{},"df":0,"c":{"docs":{},"df":0,"k":{"docs":{},"df":0,"e":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.7320508075688772}},"df":1}}}}}},"o":{"docs":{},"df":0,"n":{"docs":{},"df":0,"c":{"docs":{},"df":0,"u":{"docs":{},"df":0,"r":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}},"s":{"docs":{},"df":0,"i":{"docs":{},"df":0,"d":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}},"t":{"docs":{},"df":0,"e":{"docs":{},"df":0,"x":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.4142135623730951}},"df":1}}}}}},"p":{"docs":{},"df":0,"u":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":2.449489742783178}},"df":1}},"语":{"docs":{},"df":0,"言":{"docs":{},"df":0,"理":{"docs":{},"df":0,"解":{"docs":{},"df":0,"r":{"docs":{},"df":0,"u":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}}},"（":{"docs":{},"df":0,"r":{"docs":{},"df":0,"e":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{},"df":0,"r":{"docs":{},"df":0,"i":{"docs":{},"df":0,"c":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}}}}},"d":{"docs":{},"df":0,"w":{"docs":{},"df":0,"o":{"docs":{},"df":0,"r":{"docs":{},"df":0,"d":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}}}}},"e":{"docs":{},"df":0,"a":{"docs":{},"df":0,"x":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":2.0}},"df":1}},"c":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1,"x":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}},"p":{"docs":{},"df":0,"o":{"docs":{},"df":0,"l":{"docs":{},"df":0,"l":{"docs":{},"df":0,"、":{"docs":{},"df":0,"k":{"docs":{},"df":0,"q":{"docs":{},"df":0,"u":{"docs":{},"df":0,"e":{"docs":{},"df":0,"u":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}},"x":{"docs":{},"df":0,"e":{"docs":{},"df":0,"c":{"docs":{},"df":0,"u":{"docs":{},"df":0,"t":{"docs":{},"df":0,"o":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":2.23606797749979}},"df":1}}}}}}}},"f":{"docs":{},"df":0,"l":{"docs":{},"df":0,"o":{"docs":{},"df":0,"a":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}},"n":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1},"u":{"docs":{},"df":0,"t":{"docs":{},"df":0,"u":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":4.58257569495584}},"df":1,"e":{"docs":{},"df":0,":":{"docs":{},"df":0,":":{"docs":{},"df":0,"p":{"docs":{},"df":0,"o":{"docs":{},"df":0,"l":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}},"、":{"docs":{},"df":0,"w":{"docs":{},"df":0,"a":{"docs":{},"df":0,"k":{"docs":{},"df":0,"e":{"docs":{},"df":0,"r":{"docs":{},"df":0,"、":{"docs":{},"df":0,"e":{"docs":{},"df":0,"x":{"docs":{},"df":0,"e":{"docs":{},"df":0,"c":{"docs":{},"df":0,"u":{"docs":{},"df":0,"t":{"docs":{},"df":0,"o":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}}}}},"g":{"docs":{},"df":0,"c":{"docs":{},"df":0,"c":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}},"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.7320508075688772}},"df":1}},"i":{"docs":{},"df":0,"/":{"docs":{},"df":0,"o":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":2.23606797749979}},"df":1}},"n":{"docs":{},"df":0,"p":{"docs":{},"df":0,"u":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":3.7416573867739413}},"df":1}}},"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}},"k":{"docs":{},"df":0,"b":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}},"l":{"docs":{},"df":0,"8":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1},"b":{"docs":{},"df":0,"b":{"docs":{},"df":0,"0":{"docs":{},"df":0,"_":{"docs":{},"df":0,"3":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}},"1":{"docs":{},"df":0,"_":{"docs":{},"df":0,"1":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}},"e":{"docs":{},"df":0,"v":{"docs":{},"df":0,"e":{"docs":{},"df":0,"l":{"docs":{},"df":0,"=":{"docs":{},"df":0,"3":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}}}}}},"i":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1,"f":{"docs":{},"df":0,"e":{"docs":{},"df":0,"t":{"docs":{},"df":0,"i":{"docs":{},"df":0,"m":{"docs":{},"df":0,"e":{"docs":{},"df":0,"s":{"docs":{},"df":0,"》":{"docs":{},"df":0,"l":{"docs":{},"df":0,"e":{"docs":{},"df":0,"c":{"docs":{},"df":0,"t":{"docs":{},"df":0,"u":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}},"m":{"docs":{},"df":0,"b":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1},"e":{"docs":{},"df":0,"m":{"docs":{},"df":0,"c":{"docs":{},"df":0,"p":{"docs":{},"df":0,"i":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1},"y":{"docs":{},"df":0,"：":{"docs":{},"df":0,"假":{"docs":{},"df":0,"设":{"docs":{},"df":0,"源":{"docs":{},"df":0,"和":{"docs":{},"df":0,"目":{"docs":{},"df":0,"标":{"docs":{},"df":0,"内":{"docs":{},"df":0,"存":{"docs":{},"df":0,"区":{"docs":{},"df":0,"域":{"docs":{},"df":0,"不":{"docs":{},"df":0,"重":{"docs":{},"df":0,"叠":{"docs":{},"df":0,"（":{"docs":{},"df":0,"n":{"docs":{},"df":0,"o":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}}}},"m":{"docs":{},"df":0,"o":{"docs":{},"df":0,"v":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1,"e":{"docs":{},"df":0,"：":{"docs":{},"df":0,"允":{"docs":{},"df":0,"许":{"docs":{},"df":0,"源":{"docs":{},"df":0,"和":{"docs":{},"df":0,"目":{"docs":{},"df":0,"标":{"docs":{},"df":0,"内":{"docs":{},"df":0,"存":{"docs":{},"df":0,"区":{"docs":{},"df":0,"域":{"docs":{},"df":0,"重":{"docs":{},"df":0,"叠":{"docs":{},"df":0,"（":{"docs":{},"df":0,"m":{"docs":{},"df":0,"a":{"docs":{},"df":0,"y":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}}}}}}},"o":{"docs":{},"df":0,"d":{"docs":{},"df":0,"e":{"docs":{},"df":0,"l":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}},"v":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}}},"n":{"docs":{},"df":0,"g":{"docs":{},"df":0,"i":{"docs":{},"df":0,"n":{"docs":{},"df":0,"x":{"docs":{},"df":0,"、":{"docs":{},"df":0,"n":{"docs":{},"df":0,"o":{"docs":{},"df":0,"d":{"docs":{},"df":0,"e":{"docs":{},"df":0,".":{"docs":{},"df":0,"j":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}}}},"o":{"docs":{},"df":0,"2":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1},"p":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}},"u":{"docs":{},"df":0,"t":{"docs":{},"df":0,"p":{"docs":{},"df":0,"u":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":2.6457513110645907}},"df":1}}}}}},"p":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":2.0}},"df":1,"a":{"docs":{},"df":0,"r":{"docs":{},"df":0,"a":{"docs":{},"df":0,"l":{"docs":{},"df":0,"l":{"docs":{},"df":0,"e":{"docs":{},"df":0,"l":{"docs":{},"df":0,"/":{"docs":{},"df":0,"c":{"docs":{},"df":0,"o":{"docs":{},"df":0,"n":{"docs":{},"df":0,"c":{"docs":{},"df":0,"u":{"docs":{},"df":0,"r":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}},"e":{"docs":{},"df":0,"n":{"docs":{},"df":0,"d":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.4142135623730951}},"df":1,"i":{"docs":{},"df":0,"n":{"docs":{},"df":0,"g":{"docs":{},"df":0,"，":{"docs":{},"df":0,"这":{"docs":{},"df":0,"和":{"docs":{},"df":0,"忙":{"docs":{},"df":0,"等":{"docs":{},"df":0,"待":{"docs":{},"df":0,"（":{"docs":{},"df":0,"b":{"docs":{},"df":0,"u":{"docs":{},"df":0,"s":{"docs":{},"df":0,"i":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}},"i":{"docs":{},"df":0,"n":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1,"&":{"docs":{},"df":0,"l":{"docs":{},"df":0,"t":{"docs":{},"df":0,";":{"docs":{},"df":0,"&":{"docs":{},"df":0,"a":{"docs":{},"df":0,"m":{"docs":{},"df":0,"p":{"docs":{},"df":0,";":{"docs":{},"df":0,"m":{"docs":{},"df":0,"u":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}}}}}},"o":{"docs":{},"df":0,"i":{"docs":{},"df":0,"n":{"docs":{},"df":0,"t":{"docs":{},"df":0,"e":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.7320508075688772}},"df":1}}}}},"l":{"docs":{},"df":0,"l":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":3.0}},"df":1,":":{"docs":{},"df":0,":":{"docs":{},"df":0,"p":{"docs":{},"df":0,"e":{"docs":{},"df":0,"n":{"docs":{},"df":0,"d":{"docs":{},"df":0,"i":{"docs":{},"df":0,"n":{"docs":{},"df":0,"g":{"docs":{},"df":0,"：":{"docs":{},"df":0,"f":{"docs":{},"df":0,"u":{"docs":{},"df":0,"t":{"docs":{},"df":0,"u":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}}}}},"r":{"docs":{},"df":0,"e":{"docs":{},"df":0,"a":{"docs":{},"df":0,"d":{"docs":{},"df":0,"y":{"docs":{},"df":0,"(":{"docs":{},"df":0,"v":{"docs":{},"df":0,"a":{"docs":{},"df":0,"l":{"docs":{},"df":0,"u":{"docs":{},"df":0,"e":{"docs":{},"df":0,")":{"docs":{},"df":0,"：":{"docs":{},"df":0,"f":{"docs":{},"df":0,"u":{"docs":{},"df":0,"t":{"docs":{},"df":0,"u":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}}}}}}},"r":{"docs":{},"df":0,"o":{"docs":{},"df":0,"b":{"docs":{},"df":0,"l":{"docs":{},"df":0,"e":{"docs":{},"df":0,"m":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}},"f":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}},"t":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}},"u":{"docs":{},"df":0,"l":{"docs":{},"df":0,"l":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}},"q":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.7320508075688772}},"df":1,"u":{"docs":{},"df":0,"a":{"docs":{},"df":0,"l":{"docs":{},"df":0,"i":{"docs":{},"df":0,"f":{"docs":{},"df":0,"i":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}},"r":{"docs":{},"df":0,"a":{"docs":{},"df":0,"w":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}},"d":{"docs":{},"df":0,"i":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.7320508075688772}},"df":1}},"e":{"docs":{},"df":0,"a":{"docs":{},"df":0,"d":{"docs":{},"df":0,"i":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}},"f":{"docs":{},"df":0,"e":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}}},"s":{"docs":{},"df":0,"t":{"docs":{},"df":0,"r":{"docs":{},"df":0,"i":{"docs":{},"df":0,"c":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":3.4641016151377544}},"df":1,"/":{"docs":{},"df":0,"b":{"docs":{},"df":0,"o":{"docs":{},"df":0,"r":{"docs":{},"df":0,"r":{"docs":{},"df":0,"o":{"docs":{},"df":0,"w":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}},"，":{"docs":{},"df":0,"函":{"docs":{},"df":0,"数":{"docs":{},"df":0,"体":{"docs":{},"df":0,"完":{"docs":{},"df":0,"全":{"docs":{},"df":0,"相":{"docs":{},"df":0,"同":{"docs":{},"df":0,"。":{"docs":{},"df":0,"再":{"docs":{},"df":0,"看":{"docs":{},"df":0,"编":{"docs":{},"df":0,"译":{"docs":{},"df":0,"结":{"docs":{},"df":0,"果":{"docs":{},"df":0,"（":{"docs":{},"df":0,"g":{"docs":{},"df":0,"c":{"docs":{},"df":0,"c":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}}}}}}}}}},"u":{"docs":{},"df":0,"l":{"docs":{},"df":0,"e":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":4.0}},"df":1,"（":{"docs":{},"df":0,"r":{"docs":{},"df":0,"u":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{},"df":0,"/":{"docs":{},"df":0,"c":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}}}},"s":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":5.291502622129181},"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":2.8284271247461903}},"df":2,"o":{"docs":{},"df":0,"n":{"docs":{},"df":0,"o":{"docs":{},"df":0,"m":{"docs":{},"df":0,"i":{"docs":{},"df":0,"c":{"docs":{},"df":0,"o":{"docs":{},"df":0,"n":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}}},"的":{"docs":{},"df":0,"a":{"docs":{},"df":0,"l":{"docs":{},"df":0,"i":{"docs":{},"df":0,"a":{"docs":{},"df":0,"s":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}},"过":{"docs":{},"df":0,"程":{"docs":{},"df":0,"中":{"docs":{},"df":0,"，":{"docs":{},"df":0,"得":{"docs":{},"df":0,"益":{"docs":{},"df":0,"于":{"docs":{},"df":0,"r":{"docs":{},"df":0,"u":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{},"df":0,"的":{"docs":{},"df":0,"并":{"docs":{},"df":0,"发":{"docs":{},"df":0,"模":{"docs":{},"df":0,"型":{"docs":{},"df":0,"很":{"docs":{},"df":0,"好":{"docs":{},"df":0,"地":{"docs":{},"df":0,"规":{"docs":{},"df":0,"避":{"docs":{},"df":0,"了":{"docs":{},"df":0,"初":{"docs":{},"df":0,"学":{"docs":{},"df":0,"者":{"docs":{},"df":0,"在":{"docs":{},"df":0,"使":{"docs":{},"df":0,"用":{"docs":{},"df":0,"时":{"docs":{},"df":0,"容":{"docs":{},"df":0,"易":{"docs":{},"df":0,"踩":{"docs":{},"df":0,"的":{"docs":{},"df":0,"坑":{"docs":{},"df":0,"，":{"docs":{},"df":0,"因":{"docs":{},"df":0,"此":{"docs":{},"df":0,"我":{"docs":{},"df":0,"也":{"docs":{},"df":0,"对":{"docs":{},"df":0,"并":{"docs":{},"df":0,"发":{"docs":{},"df":0,"编":{"docs":{},"df":0,"程":{"docs":{},"df":0,"有":{"docs":{},"df":0,"了":{"docs":{},"df":0,"一":{"docs":{},"df":0,"定":{"docs":{},"df":0,"的":{"docs":{},"df":0,"了":{"docs":{},"df":0,"解":{"docs":{},"df":0,"。":{"docs":{},"df":0,"r":{"docs":{},"df":0,"u":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"s":{"docs":{},"df":0,"e":{"docs":{},"df":0,"l":{"docs":{},"df":0,"f":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1,"&":{"docs":{},"df":0,"g":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}},"h":{"docs":{},"df":0,"u":{"docs":{},"df":0,"n":{"docs":{"https://sudoytang.github.io/":{"tf":1.0}},"df":1}}},"t":{"docs":{},"df":0,"a":{"docs":{},"df":0,"c":{"docs":{},"df":0,"k":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}},"n":{"docs":{},"df":0,"d":{"docs":{},"df":0,"a":{"docs":{},"df":0,"r":{"docs":{},"df":0,"d":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}},"d":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1},"r":{"docs":{},"df":0,"i":{"docs":{},"df":0,"c":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":2.449489742783178}},"df":1}}}}}},"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.7320508075688772}},"df":1,"i":{"docs":{},"df":0,"m":{"docs":{},"df":0,"e":{"docs":{},"df":0,"r":{"docs":{},"df":0,"、":{"docs":{},"df":0,"c":{"docs":{},"df":0,"h":{"docs":{},"df":0,"a":{"docs":{},"df":0,"n":{"docs":{},"df":0,"n":{"docs":{},"df":0,"e":{"docs":{},"df":0,"l":{"docs":{},"df":0,"、":{"docs":{},"df":0,"m":{"docs":{},"df":0,"u":{"docs":{},"df":0,"t":{"docs":{},"df":0,"e":{"docs":{},"df":0,"x":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}},"o":{"docs":{},"df":0,"d":{"docs":{},"df":0,"o":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}},"k":{"docs":{},"df":0,"i":{"docs":{},"df":0,"o":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.4142135623730951}},"df":1,"、":{"docs":{},"df":0,"a":{"docs":{},"df":0,"s":{"docs":{},"df":0,"y":{"docs":{},"df":0,"n":{"docs":{},"df":0,"c":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}}},"r":{"docs":{},"df":0,"a":{"docs":{},"df":0,"i":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.4142135623730951}},"df":1}}},"e":{"docs":{},"df":0,"e":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}},"y":{"docs":{},"df":0,"p":{"docs":{},"df":0,"e":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}},"u":{"docs":{},"df":0,"n":{"docs":{},"df":0,"d":{"docs":{},"df":0,"e":{"docs":{},"df":0,"f":{"docs":{},"df":0,"i":{"docs":{},"df":0,"n":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.4142135623730951}},"df":1}}}}},"s":{"docs":{},"df":0,"a":{"docs":{},"df":0,"f":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}},"w":{"docs":{},"df":0,"a":{"docs":{},"df":0,"i":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}},"k":{"docs":{},"df":0,"e":{"docs":{},"df":0,"r":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":2.6457513110645907}},"df":1,".":{"docs":{},"df":0,"w":{"docs":{},"df":0,"a":{"docs":{},"df":0,"k":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}},":":{"docs":{},"df":0,":":{"docs":{},"df":0,"w":{"docs":{},"df":0,"a":{"docs":{},"df":0,"k":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}}}}}},"e":{"docs":{},"df":0,"b":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}}},"title":{"root":{"docs":{},"df":0,"0":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1},"a":{"docs":{},"df":0,"l":{"docs":{},"df":0,"i":{"docs":{},"df":0,"a":{"docs":{},"df":0,"s":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}},"c":{"docs":{},"df":0,"语":{"docs":{},"df":0,"言":{"docs":{},"df":0,"理":{"docs":{},"df":0,"解":{"docs":{},"df":0,"r":{"docs":{},"df":0,"u":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}}}}}}}}},"r":{"docs":{},"df":0,"u":{"docs":{},"df":0,"l":{"docs":{},"df":0,"e":{"docs":{"https://sudoytang.github.io/rust-aliasing-rules/":{"tf":1.0}},"df":1}},"s":{"docs":{},"df":0,"t":{"docs":{"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"tf":1.0}},"df":1}}}},"s":{"docs":{},"df":0,"h":{"docs":{},"df":0,"u":{"docs":{},"df":0,"n":{"docs":{"https://sudoytang.github.io/":{"tf":1.0}},"df":1}}}}}}},"documentStore":{"save":true,"docs":{"https://sudoytang.github.io/":{"body":"","id":"https://sudoytang.github.io/","title":"Shun 口一说"},"https://sudoytang.github.io/rust-aliasing-rules/":{"body":"前言\n在学习 Rust 的过程中，我们经常听说 Rust 的借用检查器（borrow checker）不仅保证了内存安全，还能帮助编译器做出更激进的优化。\nProf. Baochun Li 在 ECE 1724 Rust 课程的《Lifetimes》Lecture 中提到了 Aliasing，并举了以下例子：\n\n他从可优化性的角度解释了 aliasing 假设对编译优化的影响。然而，对于被 borrow checker 保护得太好的 Rust 使用者来说，这段代码的可优化性似乎是理所当然的——毕竟借用规则不允许同时存在可变引用和不可变引用。这反而让人有点摸不着头脑：这和优化有什么关系？\n要真正理解这个问题，我们需要回到 C 语言，看看在没有借用检查的世界里，编译器面临着怎样的困境。本文将从 C 语言的 aliasing 问题出发，逐步理解 Rust 的 aliasing rule 为编译器带来的价值。\nC语言中的 Aliasing Rule\n什么是 Aliasing？\nAliasing（别名） 指的是两个或多个指针指向同一块内存区域的情况。当函数接收多个指针参数时，因为这些指针可能来自任何地方，编译器通常无法确定这些指针是否会指向重叠的内存，这就是 pointer aliasing problem。\n一个经典的例子是 C 标准库中的 memcpy 和 memmove：\n\n注意到它们的函数签名有一个关键区别：memcpy 的参数带有 restrict 关键字，而 memmove 没有。\n\nmemcpy：假设源和目标内存区域不重叠（no-alias），可以做激进优化（如并行拷贝、向量化）\nmemmove：允许源和目标内存区域重叠（may-alias），必须小心处理拷贝顺序\n\n这两个函数存在的原因正是因为 aliasing 的情况不同，需要不同的实现策略。\n一个具体的例子\n让我们把前面的 Rust 例子翻译成 C 语言，看看编译器会生成什么样的代码：\n\n在这个版本中，编译器不知道 input 和 output 是否指向同一块内存。因此它必须保守地假设它们可能指向同一地址。\n让我们看看编译器会做什么（使用 gcc -O2 编译）：\n\n注意关键的一点：*input 被读取了两次（第 6 行再次从 [rdi] 读取）。\n为什么？ 因为编译器担心 input 和 output 可能指向同一地址。如果它们是同一个指针，那么第一个 if 块中的 *output = 1 就改变了 *input 的值！因此，第二个 if 必须重新读取 *input 的值，不能直接使用之前读取的值。\n这就是 aliasing 带来的性能损失：编译器不得不生成保守的代码。\nrestrict 关键字：告诉编译器\"不会有别名\"\nC99 引入了 restrict 关键字，它是程序员向编译器做出的承诺：这个指针指向的内存区域在函数执行期间不会通过其他指针访问。\n\n现在我们只是在函数签名上加了 restrict，函数体完全相同。再看编译结果（gcc -O2）：\n\n对比两个版本，区别非常明显：\n\n*input 只被读取一次（第 1 行 mov eax, DWORD PTR [rdi]）：编译器知道 *output = 1 不会影响 *input 的值，可以在之后的比较中继续使用寄存器 eax 中的值\n更激进的优化：当 *input &gt; 10 时（.L8 分支），编译器推导出最终结果是 2，直接将常量 2 赋值并写入 *output，而不是先写 1 再乘以 2\n\n这就是 restrict 关键字的威力：它让编译器能够根据 no-alias 假设进行更全面的优化。\nRust的Aliasing Rule\n现在我们回到 Rust。理解了 C 语言的问题后，Rust 的优势就显而易见了。\n引用天然保证 No-Aliasing\nRust 对引用有严格的借用规则：\n\n要么有多个不可变引用（&amp;T）\n要么有一个可变引用（&amp;mut T）\n但不能同时存在\n\n这个规则天然地保证了：当存在可变引用时，不会有其他引用指向同一块内存。这正是 no-aliasing 的定义！\n让我们看看文章开头的 Rust 例子会被编译成什么：\n\n编译结果 (-C opt-level=3)：\n\n可以看到，*input 同样只被读取一次（第 1 行，保存在 ecx 中），编译器还预先将常量 2 加载到 eax 中（第 2 行），为 *input &gt; 10 的情况做准备。当 *input &gt; 10 时，会跳转到 .LBB0_3 直接写入这个预先准备好的值。这和带 restrict 的 C 版本采用了相似的优化策略。\nRust 的借用规则让编译器确信 input 和 output 不会指向同一块内存，因此可以安全地进行激进优化。\n裸指针：回到 C 的世界\n那么，如果我们绕过借用检查器，使用裸指针（raw pointer）呢？\n\n编译结果 (-C opt-level=3)：\n\n可以看到，在 .LBB1_1 分支中，*input 被读取了两次（第 1 行和第 10 行，都是 mov eax, dword ptr [rdi]）。这和不带 restrict 的 C 版本的行为一致：编译器必须在写入 *output = 1 之后重新读取 *input，因为它不能确定两个指针是否指向同一块内存。\n这说明：Rust 对裸指针没有 aliasing 假设。编译器会保守地认为两个裸指针可能指向同一块内存。这是合理的，因为裸指针绕过了借用检查器，编译器无法保证它们的关系。\nBorrow Rules = 强化的 Aliasing Rules\n通过对比可以看出：\n语言/方式Aliasing 保证编译器优化\nC（普通指针）❌ 可能有 alias保守\nC（restrict）✅ 程序员承诺 no-alias激进\nRust（引用）✅ 编译器强制 no-alias激进\nRust（裸指针）❌ 可能有 alias保守\n\nRust 的借用规则本质上是一种编译器强制执行的 aliasing rule。它比 C 的 restrict 更强大，因为：\n\n静态检查：违反规则会在编译时被发现，而不是运行时未定义行为\n自动推导：编译器自动知道引用满足 no-alias，不需要程序员手动标注\n全局保证：规则在整个程序中强制执行，而 restrict 只是局部承诺\n\n这就是为什么 Rust 的 borrow checker 不仅保证了内存安全，还能带来性能优势——它为编译器提供了更多的优化信息。\nRust Reference 怎么写的？\nRust 官方文档在 Undefined Behavior 一节中明确列出了关于 aliasing 的规则。\n值得注意的是，Rust 的 pointer aliasing rule 仍在演进中。目前 Rust 团队正在通过 Stacked Borrows 和 Tree Borrows 等模型来形式化这些规则。\n但对于涉及引用的情况，规则是明确的：\n\n产生以下情况的引用是未定义行为：\n\n一个可变引用（&amp;mut T）与任何其他指向相同内存的引用（无论可变或不可变）同时存活\n一个不可变引用（&amp;T）与指向相同内存的可变引用同时存活\n\n\n这些规则确保了：\n\n独占性：&amp;mut T 保证独占访问，编译器可以假设没有其他路径访问这块内存\n不变性：&amp;T 保证数据不会被修改，编译器可以缓存读取的值\n\n编译器正是基于这些保证来进行优化的。违反这些规则（通常通过 unsafe 代码）会导致未定义行为，编译器生成的优化代码可能产生意外结果。\n题外话：C++ 的 Strict Aliasing Rule\nC++ 还有另一种形式的 aliasing rule，称为 strict aliasing rule（严格别名规则）。它关注的是类型而不是指针本身。\n简单来说，C++ 的 strict aliasing rule 规定：编译器可以假设不同类型的指针不会指向重叠的内存（除了一些例外，如 char* 可以指向任何类型）。\n看一个具体的例子：\n\n直觉上，如果 p 和 q 指向同一块内存，这个函数应该返回 3.14f 的位表示（一个整数，通常是 1078523331）。但实际上，编译器会基于 strict aliasing rule 进行优化：\n\n注意最后一行：编译器直接返回常量 42，而不是重新读取 *p 的值。因为编译器假设 int* 和 float* 不会指向同一块内存，所以认为 *q = 3.14f 不会影响 *p 的值。\n如果我们真的让 p 和 q 指向同一块内存：\n\n这是一个违反直觉的结果：内存中的值已经被改变了，但函数返回的却是旧值。这就是 strict aliasing rule 导致的未定义行为——编译器的优化假设被违反了。\n这是一种基于类型的 aliasing rule，与我们之前讨论的基于可变性和独占性的 aliasing rule（Rust/C restrict）不同。两者的目标都是给编译器更多优化空间，但约束的角度不同：\n\nC/Rust 的 restrict/borrow：关注同一类型的多个指针是否重叠\nC++ 的 strict aliasing：关注不同类型的指针是否重叠\n\nRust 也有类似的规则（不同类型的引用不应指向同一内存），但由于 Rust 的类型系统和借用检查器的限制，在安全代码中很难违反这个规则。\n总结\n通过从 C 语言的 restrict 关键字出发，我们理解了 aliasing 对编译器优化的影响：\n\nAliasing 是性能杀手：当编译器不确定两个指针是否重叠时，必须生成保守的代码\nC 的 restrict：程序员手动承诺 no-alias，但没有编译时检查\nRust 的引用：编译器通过借用规则强制保证 no-alias，自动获得优化\nRust 的裸指针：和 C 的普通指针一样，编译器保守处理\n\nRust 的借用检查器本质上是把 aliasing rule 编码到类型系统中，在保证内存安全的同时，也为编译器提供了丰富的优化信息。这是 Rust \"零成本抽象\"理念的一个完美体现：安全的代码也是高效的代码。\n\n参考资料：\n\nRust Reference: Behavior considered undefined\nThe Rustonomicon: Aliasing\nC99 Standard: The restrict type qualifier\nStacked Borrows: An Aliasing Model For Rust\n\n","id":"https://sudoytang.github.io/rust-aliasing-rules/","title":"从C语言理解Rust Aliasing Rule"},"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"body":"前言\n虽然我在近几年写的代码几乎都是同步的，但是最近在学习Rust的过程中，得益于Rust的并发模型很好地规避了初学者在使用时容易踩的坑，因此我也对并发编程有了一定的了解。Rust的并发编程除了多进程和多线程外，还有一套异步编程模型。我尝试过使用 Tokio 这样的异步运行时，但对它们的内部机制始终是一知半解。为了真正理解 Rust 异步编程的底层原理，我决定从零开始实现一个学习性质的异步运行时。它的目标不是打造一个生产级的运行时，而是通过动手实践来深入理解 Future、Waker、Executor 这些概念是如何协同工作的。\n本系列笔记记录了我在这个过程中的学习和思考。\n在开始动手实现之前，先梳理一下异步编程的基本概念：它是什么、为什么需要它、以及它和多线程的区别。\n什么是异步编程？\n简单来说，异步编程就是一种让程序在等待某些操作完成的时候，不傻站着干等，而是去做点别的事情的编程方式。\n举个生活中的例子，煮饭的场景：\n\n同步方式：把米放进电饭煲，然后站在那里盯着它煮熟（30分钟），什么都不干。煮好了，再去烧菜（15分钟），烧好了再去煮汤（10分钟）。总共需要 55 分钟。\n异步方式：把米放进电饭煲，设好定时器，然后去烧菜。烧菜的同时电饭煲在工作。烧完菜再去煮汤。饭、菜、汤可能在 30-35 分钟内全部完成。\n\n异步编程的核心思想就是：不要浪费等待的时间。\n在计算机程序中，有大量的操作需要\"等待\"：\n\n从网络读取数据（等待网卡）\n从磁盘读取文件（等待硬盘）\n等待用户输入（等待用户）\n等待数据库查询结果（等待数据库服务器）\n\n这些操作的共同特点是：CPU 实际上是空闲的，它只是在等外部设备或系统完成工作。如果能在等待的时候去处理其他任务，程序的效率就会大大提高。\n异步并发与多线程：为什么选择异步？\n在并发编程中，有两种主要的实现方式：多线程和异步。它们经常被混淆，但有着本质的区别。\n多线程（Parallel/Concurrent）\n在多核系统上：\n\n在单核系统上：\n\n特点：\n\n(可能)真正的并行：在多核 CPU 上，多个线程可以同时执行；在单核上则是操作系统快速切换造成的\"并发\"假象\n抢占式调度：操作系统决定什么时候切换线程，程序无法控制\n高开销：每个线程有独立的栈（通常 1-2MB），上下文切换代价高\n适用场景：CPU 密集型任务，需要利用多核心进行计算\n\n异步并发（Concurrent）\n\n特点：\n\n单线程也能并发：通过任务切换实现，无需多核支持\n协作式调度：任务主动让出控制权（在 await 点），执行流程可预测\n低开销：任务是轻量级的状态机（通常几 KB），切换成本低\n适用场景：I/O 密集型任务，大量等待操作\n\n为什么选择异步？\n考虑一个实际场景：一个 Web 服务器需要同时处理 10,000 个客户端连接。\n早期的服务器架构会为每个连接创建一个进程或线程，但在面对上万并发连接时会遇到严重的性能瓶颈，这被称为 C10K 问题。\n多线程方案的问题：\n\n10,000 个线程 = 至少 10GB 内存（每个线程栈空间约 1-2MB）\n操作系统在这么多线程间切换会产生巨大开销\n大部分线程其实在休眠等待（等待客户端发送数据、等待数据库响应等），造成资源浪费\n\n异步方案的优势：\n\n只需要 4-8 个工作线程（对应 CPU 核心数）\n10,000 个异步任务可能只占几十 MB 内存\n任务在 I/O 等待时主动让出 CPU，几乎没有资源浪费\n\n异步 I/O 模型（配合 epoll、kqueue 等系统调用）是解决 C10K 问题的关键技术之一。现代的高性能服务器（如 Nginx、Node.js）都采用了这种模型。这就是为什么 Tokio、async-std 这样的异步运行时能让 Rust 在高并发场景下表现出色。\n两者的结合：最佳实践\n异步和多线程不是对立的。 现代异步运行时（如 Tokio）通常会结合两者，用多个工作线程来利用多核 CPU，并在每个线程上运行大量异步任务。这样既能享受多核并行的性能，又能用异步来高效处理大量 I/O 操作。\nRust 的异步模型\nRust 的异步是基于 Future 和 polling 模型的。理解这几个核心概念是实现异步运行时的基础。\nFuture：未来的计算\nFuture 是 Rust 异步编程的核心 trait：\n\nFuture 代表一个\"未来会产生结果\"的计算。它不会自动执行，必须有人去驱动它。\n当我们写 async fn 或 async {} 块时，编译器会生成一个实现了 Future trait 的状态机。例如：\n\n这会被编译器转换成类似这样的结构：\n\n\nTODO：关于为什么 poll 的第一个参数是 Pin&lt;&amp;mut Self&gt; 而不是 &amp;mut self，涉及到 Rust 的 Pin 机制和自引用结构的问题。这个话题比较复杂，计划在后续单独写一篇文章详细说明。\n\nPoll：轮询结果\n\nPoll 是一个简单的枚举，表示 Future 的状态：\n\nPoll::Pending：Future 还没完成，现在无法产生结果\nPoll::Ready(value)：Future 已完成，这是最终结果\n\n这是一个基于\"拉取\"（pull）的模型：执行器主动来问 Future\"完成了吗？\"，而不是 Future 主动推送结果。\nExecutor：执行器\n执行器（Executor）负责驱动 Future 的执行。它的核心职责是：\n\n持有一个或多个 Future\n反复调用它们的 poll 方法\n当所有 Future 都完成时，执行器的工作也就结束了\n\n一个最简单的执行器可能长这样：\n\n当然，真实的执行器要复杂得多：需要处理多个任务、任务调度、优先级等等。\nWaker：唤醒机制\n如果执行器只是盲目地反复调用 poll，那效率会很低——大部分时候 Future 都返回 Pending，这和忙等待（busy waiting）没什么区别。\nWaker 机制解决了这个问题。它让 Future 能够告诉执行器：\"当我准备好继续执行时，我会通知你\"。\nWaker 的工作流程：\n\n执行器在调用 poll 时，通过 Context 传递一个 Waker 给 Future\n如果 Future 返回 Pending，它会把这个 Waker 保存起来\n当 Future 准备好继续执行时（比如 I/O 完成了），它调用 waker.wake()\n执行器收到唤醒通知，知道该再次 poll 这个 Future 了\n\n这样，执行器就不需要盲目轮询，而是可以休眠等待，直到有任务需要处理。这大大提高了效率。\n整体流程\n把这些概念串起来：\n\n用户编写 async 代码，编译器生成 Future 状态机\n用户把 Future 交给 Executor 执行\nExecutor 调用 Future::poll()，传入包含 Waker 的 Context\n如果 Future 返回 Ready，任务完成\n如果 Future 返回 Pending，它会在适当的时机调用 Waker::wake()\nExecutor 收到唤醒通知，再次调用 poll()\n重复步骤 3-6，直到任务完成\n\n这就是 Rust 异步运行时的核心机制！接下来，我们将通过实现来深入理解这些概念。\n后续计划\n从零开始实现一个教学用的异步运行时，计划逐步实现：\n\n最简单的执行器（忙等待循环）\nWaker 机制（高效的任务唤醒）\n多任务调度\nTimer、Channel、Mutex 等异步原语\n多线程执行器\n\n第一章将从最简单的执行器开始。\n\n注：在实际编写代码的过程中，这些抽象概念会变得更加具体。许多细节在动手实践后会自然理解。\n","id":"https://sudoytang.github.io/rust-async-chapter-00-intro/","title":"手写Rust异步执行器 第0章：入门"}},"docInfo":{"https://sudoytang.github.io/":{"body":0,"title":1},"https://sudoytang.github.io/rust-aliasing-rules/":{"body":262,"title":3},"https://sudoytang.github.io/rust-async-chapter-00-intro/":{"body":118,"title":2}},"length":3},"lang":"English"}